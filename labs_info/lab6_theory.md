# ЛР №6: Управляемые вероятностные тесты (CRT)

## Введение

Вероятностное тестирование (Random Testing) генерирует независимые случайные наборы и не использует информацию о том, **какие наборы уже были сгенерированы**. Управляемое вероятностное тестирование (CRT — Controlled Random Testing) делает наоборот: очередной тестовый набор выбирается **с учётом предыдущих**, чтобы повысить разнообразие и, как следствие, вероятность обнаружения неисправностей при той же длине теста.

В этой лабораторной используется критерий «максимально отличного» набора через метрики расстояния.

## Обозначения

- $N$ — размерность тестового набора (число бит входного вектора)
- $q$ — число наборов в тесте $T = \{T_0, \dots, T_{q-1}\}$
- $T_i$ — двоичный вектор длины $N$
- $HD(T_i, T_j)$ — расстояние Хэмминга
- $CD(T_i, T_j)$ — декартово (евклидово) расстояние для двоичных векторов
- $THD(T_i)$ — суммарное расстояние Хэмминга до всех предыдущих наборов
- $TCD(T_i)$ — суммарное декартово расстояние до всех предыдущих наборов

## Метрики

### Расстояние Хэмминга

Количество позиций, в которых два набора отличаются:

$$ HD(T_i, T_j) = \sum_{k=0}^{N-1} (t_{i,k} \oplus t_{j,k}) $$

### Декартово расстояние

Для двоичных векторов удобно выражается через Хэмминга:

$$ CD(T_i, T_j) = \sqrt{HD(T_i, T_j)} $$

### Суммарные расстояния (критерий выбора)

Для очередного кандидата $T_i$:

$$ THD(T_i) = \sum_{j=0}^{i-1} HD(T_i, T_j), \quad TCD(T_i) = \sum_{j=0}^{i-1} CD(T_i, T_j) $$

Кандидат выбирается так, чтобы максимизировать $THD(T_i)$ или $TCD(T_i)$.

## Алгоритм CRT (жадный)

1. Сгенерировать $T_0$ как случайный двоичный вектор длины $N$.
2. Для каждого следующего $i=1..q-1$:
   - сгенерировать фиксированное число кандидатов $K$ (задаётся пользователем, $2..10$)
   - для каждого кандидата посчитать $THD(T_i)$ **или** $TCD(T_i)$ относительно $\{T_0..T_{i-1}\}$
   - выбрать кандидата с максимальным значением метрики как $T_i$

## Параметры задания

- $N = 7$
- $q = 5$
- число кандидатов $K \in [2..10]$
- метрика: $THD$ или $TCD$

## Оценка эффективности на схеме ЛР1–2

Эффективность теста можно оценивать через **покрытие неисправностей**:

$$ \text{coverage} = \frac{\text{detected\_faults}}{\text{total\_faults}} \times 100\% $$

В проекте покрытие считается для stuck-at неисправностей на характеристических полюсах схемы (входы + выходы вентилей), как в ЛР1–2.

## Как запускается в этом проекте

- Генерация CRT и вывод покрытия: `python3 main.py --suite prob`
- Реализация: `lab6/runner.py`
- Симуляция stuck-at и подсчёт покрытия: `helpers/fault_sim.py`

## Связь с другими лабораторными

- **ЛР1–2** дают объект тестирования (схему) и множество неисправностей stuck-at.
- **ЛР6** показывает, что даже короткие управляемые случайные тесты могут давать измеримое покрытие, но без гарантии 100%.
