# ЛР №3: Генераторы тестов на базе LFSR

## Введение

LFSR (Linear Feedback Shift Register) — регистр сдвига с линейной обратной связью — это основа **встроенного самотестирования** (BIST) цифровых систем. LFSR генерирует псевдослучайные последовательности максимальной длины ($M$-последовательности), которые используются как тестовые наборы.

## Основные понятия

### Характеристический полином

Конфигурация обратной связи описывается **характеристическим полиномом**:

$$ \Phi(x) = 1 \oplus c_1x \oplus c_2x^2 \oplus \dots \oplus c_mx^m $$

где $c_i \in \{0, 1\}$ — коэффициенты (1 = есть связь, 0 = нет связи).

### М-последовательность (максимальная последовательность)

**Определение**: Псевдослучайная последовательность **максимальной длины** $L = 2^m - 1$, где $m$ — степень порождающего полинома.

**Свойства**:
- Период $L = 2^m - 1$ (для $m=8$: $L=255$)
- Все ненулевые комбинации встречаются ровно **один раз**
- Нулевое состояние ($0 \dots 0$) **запрещено** (вызывает зацикливание в 0)

## Свойства М-последовательностей

### 1. Баланс символов
Для периода $L = 2^m - 1$:
- **Единиц**: $2^{m-1}$
- **Нулей**: $2^{m-1} - 1$

### 2. Автокорреляция
$$ R(s) = \begin{cases} L, & \text{если } s = 0 \pmod L \\ -1, & \text{иначе} \end{cases} $$

### 3. Свойство сдвига и сложения
При сложении по модулю 2 двух сдвинутых копий $M$-последовательности получается та же $M$-последовательность с другим сдвигом:
$$ \{a_k\} \oplus \{a_{k-s}\} = \{a_{k-r}\} $$

## Матричное представление LFSR

Состояние LFSR описывается вектором $A(k) = [a_1(k), a_2(k), \dots, a_m(k)]$. Переход к следующему состоянию:

$$ A(k+1) = V \cdot A(k) $$

где $V$ — порождающая матрица. Пример для $\Phi(x) = 1 \oplus x^3 \oplus x^4$:

$$
V = \begin{pmatrix}
0 & 0 & 0 & 1 \\
1 & 0 & 0 & 1 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0
\end{pmatrix}
$$

## Задача ЛР3: Оптимизация начального состояния

**Цель**: Найти начальное состояние (seed), при котором:
1. Покрываются **все** неисправности из ЛР1.
2. Число тактов (длина последовательности) **минимально**.

Алгоритм перебирает все возможные ненулевые значения регистра и находит тот `seed`, который быстрее всего (за наименьшее число циклов) достигает 100% покрытия.

## Связь с другими методами

- **ЛР1, ЛР2** — определяют целевые тестовые наборы для покрытия.
- **ЛР6, ЛР7** — используют управляемые случайные последовательности, в то время как LFSR дает неуправляемую (псевдослучайную) последовательность.
